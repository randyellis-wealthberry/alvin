# Milestone v1.0: ALVIN MVP

**Status:** ✅ SHIPPED 2026-01-17
**Phases:** 1-10
**Total Plans:** 16

## Overview

ALVIN (Active Language and Vitality Intelligence Network) transforms a production-ready T3 Stack foundation into an AI-powered "dead man's switch" that monitors user vitality through conversational check-ins and alerts family contacts through a carefully escalating notification system. The journey moved from data modeling through core check-in mechanics, added conversational AI capabilities, then to the escalation engine, and finally to a polished activity dashboard.

## Phases

### Phase 1: Database Schema

**Goal**: Define Prisma schema for all ALVIN entities (UserProfile, Contact, CheckIn, Alert, Conversation)
**Depends on**: Nothing (first phase)
**Plans**: 1 plan

Plans:

- [x] 01-01: Schema design and migration

**Details:**
Added UserProfile, Contact, CheckIn, Alert, Conversation, and Message models to Prisma schema with TypeScript enum types.

---

### Phase 2: User Profile Management

**Goal**: Profile page where users configure their check-in schedule (frequency, time preferences)
**Depends on**: Phase 1
**Plans**: 1 plan

Plans:

- [x] 02-01: Profile tRPC router and UI

**Details:**
Created profile tRPC router with get/update procedures, profile page with schedule configuration form.

---

### Phase 3: Contact Management

**Goal**: Add, edit, remove family contacts with notification preferences
**Depends on**: Phase 1
**Plans**: 1 plan

Plans:

- [x] 03-01: Contact management router and UI

**Details:**
Contact router with list/create/update/delete, soft delete via deletedAt, priority ordering, modal form for create/edit.

---

### Phase 4: Check-In System

**Goal**: Users can perform check-ins with optional biometric verification (WebAuthn)
**Depends on**: Phase 2
**Plans**: 2 plans

Plans:

- [x] 04-01: Basic check-in flow
- [x] 04-02: Biometric verification with WebAuthn

**Details:**
CheckIn router with record/list, passkey router with WebAuthn flows, check-in page with manual + biometric buttons, passkey management UI. In-memory Map for WebAuthn challenge storage (5-min expiry).

---

### Phase 5: ALVIN Chat

**Goal**: Conversational AI interface for wellness check-ins, engagement, and context gathering
**Depends on**: Phase 4
**Plans**: 3 plans

Plans:

- [x] 05-01: Chat UI and message streaming
- [x] 05-02: Conversation persistence and context
- [x] 05-03: Conversational check-in flow

**Details:**
AI SDK integration with Claude, conversation tRPC router, chat page with streaming UI, phrase-based check-in detection, onFinish callback for message persistence.

---

### Phase 6: Reminder System

**Goal**: Scheduled reminders prompt users to check in based on their configured schedule
**Depends on**: Phase 5
**Plans**: 2 plans

Plans:

- [x] 06-01: Cron job infrastructure
- [x] 06-02: Reminder email templates and delivery

**Details:**
Vercel Cron with Bearer token security, eligibility module with timezone support, Resend email integration, ReminderEmail React template.

---

### Phase 7: Alert Escalation Engine

**Goal**: State machine that progresses alerts through 4 levels based on missed check-ins
**Depends on**: Phase 6
**Plans**: 2 plans

Plans:

- [x] 07-01: Escalation state machine
- [x] 07-02: Alert cancellation flow

**Details:**
Alert state machine (L1→L2→L3→L4, CANCELLED, RESOLVED), 24h threshold per level, hourly cron for escalation, auto-resolution on check-in, alerts page with cancel action.

---

### Phase 8: Contact Notifications

**Goal**: Email family contacts at escalation levels 3 and 4
**Depends on**: Phase 7, Phase 3
**Plans**: 2 plans

Plans:

- [x] 08-01: Email template and notifications module
- [x] 08-02: Cron notification integration

**Details:**
ContactAlertEmail with L3/L4 variants, notifyPrimaryContact and notifyAllContacts functions, resend.batch.send for L4, filter by deletedAt/notifyByEmail/email.

---

### Phase 9: Activity Dashboard

**Goal**: UI showing check-in history, current alert status, conversation history, and activity log
**Depends on**: Phase 8
**Plans**: 1 plan

Plans:

- [x] 09-01: Dashboard components and data fetching

**Details:**
Dashboard tRPC router with getStatus and getActivityLog, unified activity timeline, color-coded status indicators (green >24h, yellow <24h, red overdue).

---

### Phase 10: Thesys Integration

**Goal**: Integrate Thesys UI components into ALVIN chat for enhanced conversational interfaces
**Depends on**: Phase 5
**Plans**: 1 plan

Plans:

- [x] 10-01: Thesys GenUI SDK integration

**Details:**
Installed @anthropic-ai/claude-code-sdk, added ThemeProvider, used C1Component for assistant message rendering.

---

## Milestone Summary

**Key Decisions:**

- AI SDK (not raw Anthropic SDK) for chat implementation — simpler streaming
- Phrase-based check-in detection for v1 — simple, can upgrade to LLM later
- In-memory Map for WebAuthn challenges — MVP, upgrade to Redis later
- 24h threshold per escalation level — balance urgency vs false alarms
- L3 notify primary only, L4 notify all contacts — graduated response
- Soft delete for contacts — preserve audit trail

**Issues Resolved:**

- Pre-existing lint errors blocking build (fixed in 06-02)
- Alert.userProfileId optional with SetNull for audit trail preservation

**Issues Deferred:**

- SMS notifications — v2 feature
- PWA with push notifications — v2 feature
- Redis for WebAuthn challenges — production readiness

**Technical Debt Incurred:**

- In-memory WebAuthn challenge storage not production-ready (needs Redis)
- Phrase-based check-in detection may need LLM upgrade for edge cases

---

_For current project status, see .planning/ROADMAP.md_
